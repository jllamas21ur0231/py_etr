{% extends "admin/admin_base.html" %}
{% block title %}Manage Orders{% endblock %}

{% block content %}
<h2>Manage Orders</h2>

<table class="table table-hover table-bordered">
    <thead class="table-light">
        <tr>
            <th>ID</th><th>Customer</th><th>Total</th><th>Payment</th><th>Status</th><th>Proof</th><th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.customer_name }}</td>
                <td>â‚±{{ order.total_amount }}</td>
                <td>{{ order.payment_method }}</td>
                <td><span class="badge bg-{% if order.status == 'Delivered' %}success{% elif order.status == 'Shipped' %}info{% elif order.status == 'Declined' or order.status == 'Cancelled' %}danger{% else %}warning{% endif %}">{{ order.status }}</span></td>
                <td>
                    {% if order.proof_image %}
                        <img src="{{ url_for('static', filename='uploads/proofs/' + order.proof_image) }}" width="100">
                    {% endif %}
                </td>
                <td>
                    {% if order.status == 'Pending' %}
                        <form method="post" action="{{ url_for('process_order', order_id=order.id) }}">
                            <button name="action" value="approve" class="btn btn-sm btn-success">Approve</button>
                            <button name="action" value="decline" class="btn btn-sm btn-danger" onclick="return prompt('Reason?') && this.form.reason.value=prompt('Reason')">Decline</button>
                            <input type="hidden" name="reason">
                        </form>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}